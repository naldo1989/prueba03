<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mesa <%= nro_mesa %> - Escuela <%= nro_escuela %></title>
  <style>
    body { font-family: sans-serif; background: #f5f5f5; padding: 1rem; }
    .card { background: white; border-radius: 10px; padding: 1rem; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    input { width: 100%; padding: .6rem; margin-top: .3rem; border: 1px solid #ccc; border-radius: 5px; }
    button { width: 100%; padding: .7rem; border: none; border-radius: 5px; margin-top: .5rem; font-weight: bold; cursor: pointer; }
    .actualizar { background: #007bff; color: white; }
    .cerrar { background: #dc3545; color: white; }
    .barra { background: #e9ecef; height: 20px; border-radius: 10px; overflow: hidden; margin: .5rem 0; }
    .relleno { background: #28a745; height: 100%; text-align: right; color: white; font-size: .8rem; padding-right: .3rem; }
  </style>
</head>
<body>
  <div class="card">
    <h2>Escuela <%= nro_escuela %> — Mesa <%= nro_mesa %></h2>
    <p>Total padrón: <strong><%= cantidad_votantes %></strong></p>
    <div class="barra">
      <div class="relleno" style="width:<%= porcentaje %>%"><%= porcentaje %>%</div>
    </div>
    <p>Votaron: <%= total_votaron %> / <%= cantidad_votantes %></p>

    <% if (!cerrado) { %>
      <form action="/mesa/actualizar" method="POST">
        <input type="hidden" name="nro_escuela" value="<%= nro_escuela %>">
        <input type="hidden" name="nro_mesa" value="<%= nro_mesa %>">
        <label>Nueva cantidad total de votantes:</label>
        <input type="number" name="total_votaron" min="0" required value="<%= total_votaron %>">
        <button type="submit" class="actualizar">Actualizar</button>
      </form>
      <form action="/mesa/cerrar" method="POST">
        <input type="hidden" name="nro_escuela" value="<%= nro_escuela %>">
        <input type="hidden" name="nro_mesa" value="<%= nro_mesa %>">
        <button type="submit" class="cerrar">Cerrar Mesa</button>
      </form>
    <% } else { %>
      <p style="color:red; font-weight:bold;">✅ Mesa cerrada — no se permiten más cargas.</p>
    <% } %>
  </div>
</body>
</html>
